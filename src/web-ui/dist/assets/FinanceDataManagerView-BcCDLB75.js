import{d as j,o as D,c as n,p as t,u as H,E as y,b as T,D as w,z as a,A as C,I as M,J as b,B as L,C as S,x as I,r as l,e as r,M as F}from"./vendor-EuZm8Jb1.js";import{M as N}from"./ModeToggle-bHcRDFnx.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"finance-manager-page"},R={class:"page-header"},U={class:"header-left"},J={class:"header-right"},K={class:"page-main"},P={class:"container"},q={class:"stats-cards"},G={class:"stat-card"},O={class:"stat-info"},Q={class:"stat-value"},W={class:"stat-card"},X={class:"stat-info"},Y={class:"stat-value"},Z={class:"stat-card"},t1={class:"stat-info"},s1={class:"stat-value"},e1={class:"toolbar"},o1={class:"toolbar-left"},a1={class:"filter-group"},l1=["onClick"],n1={class:"search-box"},r1={class:"toolbar-right"},i1=["disabled"],c1={class:"table-container"},d1={class:"data-table"},u1={key:0},v1={key:1},m1={class:"name-cell"},h1={class:"code-cell"},p1={class:"type-cell"},k1={class:"date-range-cell"},w1={class:"update-time-cell"},g1={class:"memory-cell"},_1={class:"memory-bar"},f1={class:"memory-size"},y1="",C1=j({__name:"FinanceDataManagerView",setup(M1){const x=I(),u=l(!1),v=l(!1),m=l(""),g=l("success"),h=l("all"),p=l(""),i=l({total:0,stockCount:0,fundCount:0}),d=l([]),k=(o,s)=>{m.value=o,g.value=s,setTimeout(()=>{m.value=""},3e3)},V=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}),z=o=>o==="stock"?"股票":"基金",B=o=>o==="stock"?"stock-tag":"fund-tag",c=l([]),_=()=>{let o=[...d.value];if(h.value!=="all"&&(o=o.filter(s=>s.type===h.value)),p.value.trim()){const s=p.value.trim().toLowerCase();o=o.filter(e=>e.name.toLowerCase().includes(s)||e.code.toLowerCase().includes(s))}c.value=o},A=async()=>{v.value=!0,await f(),v.value=!1},f=async()=>{u.value=!0;try{const o=await fetch(`${y1}/api/v1/db-manager/finance/all`,{headers:V()});if(o.ok){const s=await o.json();d.value=s.items||[],c.value=[...d.value],i.value.total=s.total||0,i.value.stockCount=s.stockCount||0,i.value.fundCount=s.fundCount||0,k("数据加载成功","success")}else{const s=await o.json();k(s.detail||"加载数据失败","error"),d.value=[],c.value=[]}}catch(o){console.error("加载数据失败:",o),k("加载数据失败","error"),d.value=[],c.value=[]}finally{u.value=!1}};return D(()=>{f()}),(o,s)=>(r(),n("div",E,[t("header",R,[t("div",U,[t("button",{class:"back-btn",onClick:s[0]||(s[0]=e=>H(x).push("/dashboard"))},[...s[2]||(s[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),y(" 返回 ",-1)])]),s[3]||(s[3]=t("h1",{class:"logo"},"金融数据管理",-1))]),t("div",J,[T(N)])]),t("main",K,[t("div",P,[m.value?(r(),n("div",{key:0,class:w(["message",g.value])},a(m.value),3)):C("",!0),t("div",q,[t("div",G,[s[5]||(s[5]=t("div",{class:"stat-icon blue"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5"})])],-1)),t("div",O,[t("span",Q,a(i.value.total),1),s[4]||(s[4]=t("span",{class:"stat-label"},"总数量",-1))])]),t("div",W,[s[7]||(s[7]=t("div",{class:"stat-icon green"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})])],-1)),t("div",X,[t("span",Y,a(i.value.stockCount),1),s[6]||(s[6]=t("span",{class:"stat-label"},"股票数量",-1))])]),t("div",Z,[s[9]||(s[9]=t("div",{class:"stat-icon purple"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 01-1.125-1.125v-3.75zM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-8.25zM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-2.25zM13.5 8.25v4.5m0-4.5h4.5m-4.5 0L18 12"})])],-1)),t("div",t1,[t("span",s1,a(i.value.fundCount),1),s[8]||(s[8]=t("span",{class:"stat-label"},"基金数量",-1))])])]),t("div",e1,[t("div",o1,[t("div",a1,[s[10]||(s[10]=t("label",null,"类型：",-1)),(r(),n(M,null,b([{key:"all",label:"全部"},{key:"stock",label:"股票"},{key:"fund",label:"基金"}],e=>t("button",{key:e.key,class:w(["filter-btn",{active:h.value===e.key}]),onClick:b1=>{h.value=e.key,_()}},a(e.label),11,l1)),64))]),t("div",n1,[s[11]||(s[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1)),L(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),onInput:_,type:"text",placeholder:"搜索名称或编码..."},null,544),[[S,p.value]])])]),t("div",r1,[t("button",{class:"refresh-btn",onClick:A,disabled:v.value},[s[12]||(s[12]=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})],-1)),y(" "+a(v.value?"刷新中...":"刷新"),1)],8,i1)])]),t("div",c1,[t("table",d1,[s[15]||(s[15]=t("thead",null,[t("tr",null,[t("th",null,"名称"),t("th",null,"编码"),t("th",null,"类型"),t("th",null,"时间范围"),t("th",null,"更新时间"),t("th",null,"内存占用")])],-1)),t("tbody",null,[!u.value&&c.value.length===0?(r(),n("tr",u1,[...s[13]||(s[13]=[t("td",{colspan:"6",class:"empty-state"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125m-3.75 0v7.5c0 .621.504 1.125 1.125 1.125m3.75-3.75C9.496 8.25 10 7.746 10 7.125m-3.75 0v3.75c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M9 12.75h3.75M9 12.75V5.625m0 7.5h3.75M9 12.75V5.625m0 7.5H6m0 7.5v7.5c0 .621.504 1.125 1.125 1.125m3.75-7.5h-3.75m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125m-3.75 0v7.5c0 .621.504 1.125 1.125 1.125m3.75-3.75C9.496 8.25 10 7.746 10 7.125m-3.75 0v3.75c0 .621.504 1.125 1.125 1.125m0 0h1.5"})]),t("p",null,"暂无数据")],-1)])])):u.value?(r(),n("tr",v1,[...s[14]||(s[14]=[t("td",{colspan:"6",class:"loading-state"},[t("div",{class:"spinner"}),t("p",null,"加载中...")],-1)])])):C("",!0),(r(!0),n(M,null,b(c.value,e=>(r(),n("tr",{key:e.id},[t("td",m1,a(e.name),1),t("td",h1,a(e.code),1),t("td",p1,[t("span",{class:w(["type-tag",B(e.type)])},a(z(e.type)),3)]),t("td",k1,a(e.dateRange),1),t("td",w1,a(e.lastUpdate),1),t("td",g1,[t("div",_1,[t("div",{class:"memory-fill",style:F({width:Math.min(100,e.memorySizeBytes/(1024*1024*100)*100)+"%"})},null,4)]),t("span",f1,a(e.memorySize),1)])]))),128))])])])])])]))}}),B1=$(C1,[["__scopeId","data-v-57d5833b"]]);export{B1 as default};
