import{d as ie,r as i,o as re,c as l,p as e,u as ce,E as V,b as de,D as j,z as n,A as v,I as g,J as _,B as N,C as ue,y as R,x as ve,g as me,F as he,e as o,N as pe,O as be}from"./vendor-EuZm8Jb1.js";import{M as ke}from"./ModeToggle-bHcRDFnx.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _e={class:"db-manager-page"},fe={class:"page-header"},we={class:"header-left"},ye={class:"header-right"},Ce={class:"page-main"},Me={class:"db-container"},xe={class:"stats-cards"},$e={class:"stat-card"},Se={class:"stat-info"},Ve={class:"stat-value"},je={class:"stat-card"},Te={class:"stat-info"},Le={class:"stat-value"},Be={class:"stat-card"},Ae={class:"stat-info"},ze={class:"stat-value"},qe={class:"tabs"},Ee=["disabled"],Oe={key:1,class:"tab-content"},Ie={class:"table-list"},De=["onClick"],He={class:"table-info"},Ne={class:"table-name"},Re={class:"table-comment"},Je={class:"table-count"},Pe={class:"count-value"},Fe={key:0,class:"empty-state"},Qe={key:2,class:"tab-content"},Ue={key:0,class:"table-detail"},Ke={class:"detail-header"},Ge={class:"detail-info"},We={class:"record-count"},Xe={class:"detail-actions"},Ye=["disabled"],Ze={class:"schema-info"},et={class:"schema-section"},tt={class:"columns-list"},st={class:"data-table-container"},at={class:"data-table"},lt={class:"checkbox-col"},ot=["checked"],nt={class:"checkbox-col"},it=["checked","onChange"],rt={class:"action-col"},ct=["onClick"],dt=["onClick"],ut={key:0,class:"empty-table"},vt={key:0,class:"pagination"},mt=["disabled"],ht={class:"page-info"},pt=["disabled"],bt={key:3,class:"tab-content"},kt={class:"sql-section"},gt=["disabled"],_t={key:0,class:"sql-result"},ft={class:"result-header"},wt={class:"result-table-container"},yt={key:0,class:"result-table"},Ct={key:1,class:"empty-result"},Mt={class:"modal"},xt={class:"modal-header"},$t={class:"modal-body"},St=["for"],Vt={key:0,class:"pk-badge"},jt=["id","onUpdate:modelValue","type","placeholder"],Tt={class:"modal-actions"},Lt={type:"submit",class:"submit-btn"},Bt={class:"modal confirm-modal"},At={class:"modal-body"},zt={class:"modal-actions"},f="",qt=ie({__name:"DatabaseManagerView",setup(Et){const K=ve(),h=i("tables"),w=i(!1),T=i(""),J=i("success"),D=i(null),L=i([]),r=i(null),u=i(null),M=i<Array([]),m=i({page:1,page_size:20,total:0,total_pages:0}),B=i(!1),x=i("create"),y=he({}),A=i(""),z=i(""),b=i(null),q=i(!1),c=i([]),S=i(!1),d=(s,t)=>{T.value=s,J.value=t,setTimeout(()=>{T.value=""},3e3)},k=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}),G=async()=>{try{const s=await fetch(`${f}/api/v1/db/stats`,{headers:k()});s.ok&&(D.value=await s.json())}catch(s){console.error("获取数据库统计失败:",s)}},E=async()=>{w.value=!0;try{const s=await fetch(`${f}/api/v1/db/tables`,{headers:k()});if(s.ok){const t=await s.json();L.value=t.tables||[]}}catch{d("获取表列表失败","error")}finally{w.value=!1}},W=async s=>{r.value=s,w.value=!0;try{const t=await fetch(`${f}/api/v1/db/tables/${s}`,{headers:k()});t.ok&&(u.value=await t.json())}catch{d("获取表信息失败","error")}finally{w.value=!1}},O=async(s,t=1)=>{w.value=!0;try{const $=await fetch(`${f}/api/v1/db/tables/${s}/records?page=${t}&page_size=${m.value.page_size}`,{headers:k()});if($.ok){const C=await $.json();M.value=C.data||[],m.value={page:C.page,page_size:C.page_size,total:C.total,total_pages:C.total_pages}}}catch{d("获取记录失败","error")}finally{w.value=!1}},X=async s=>{h.value="records",c.value=[],await W(s),await O(s)},H=async()=>{r.value&&await O(r.value,m.value.page)},P=s=>s==null?"-":typeof s=="object"?JSON.stringify(s):String(s),Y=()=>{if(x.value="create",y.value={},A.value="",u.value)for(const s of u.value.columns)s.default&&(y.value[s.name]=s.default.replace(/::.*/,"").replace(/'/,""));B.value=!0},Z=s=>{if(x.value="edit",A.value=s.id,u.value)for(const t of u.value.columns)t.name!=="id"&&s[t.name]!==void 0&&(y.value[t.name]=s[t.name]);B.value=!0},I=()=>{B.value=!1,y.value={},A.value=""},ee=async()=>{if(r.value)try{let s;if(x.value==="create"?s=await fetch(`${f}/api/v1/db/tables/${r.value}/records`,{method:"POST",headers:k(),body:JSON.stringify(y.value)}):s=await fetch(`${f}/api/v1/db/tables/${r.value}/records/${A.value}`,{method:"PUT",headers:k(),body:JSON.stringify(y.value)}),s.ok)d(x.value==="create"?"创建成功":"更新成功","success"),I(),H(),E();else{const t=await s.json();d(t.detail||"操作失败","error")}}catch{d("操作失败","error")}},te=async s=>{if(!(!r.value||!confirm("确定要删除这条记录吗？")))try{(await fetch(`${f}/api/v1/db/tables/${r.value}/records/${s}`,{method:"DELETE",headers:k()})).ok?(d("删除成功","success"),H(),E()):d("删除失败","error")}catch{d("删除失败","error")}},se=async()=>{if(!(!r.value||c.value.length===0))try{const s=await fetch(`${f}/api/v1/db/tables/${r.value}/bulk-delete`,{method:"POST",headers:k(),body:JSON.stringify({ids:c.value})});if(s.ok){const t=await s.json();d(`成功删除 ${t.deleted_count} 条记录`,"success"),c.value=[],S.value=!1,H(),E()}else d("批量删除失败","error")}catch{d("批量删除失败","error")}},ae=async()=>{if(z.value.trim()){q.value=!0;try{const s=await fetch(`${f}/api/v1/db/execute`,{method:"POST",headers:k(),body:JSON.stringify({query:z.value})});if(s.ok)b.value=await s.json();else{const t=await s.json();d(t.detail||"查询执行失败","error"),b.value=null}}catch{d("查询执行失败","error"),b.value=null}finally{q.value=!1}}},le=s=>{const t=c.value.indexOf(s);t===-1?c.value.push(s):c.value.splice(t,1)},oe=()=>{c.value.length===M.value.length?c.value=[]:c.value=M.value.map(s=>s.id)},ne=me(()=>M.value.length>0&&c.value.length===M.value.length);return re(()=>{G(),E()}),(s,t)=>{var $,C,F,Q;return o(),l("div",_e,[e("header",fe,[e("div",we,[e("button",{class:"back-btn",onClick:t[0]||(t[0]=a=>ce(K).push("/dashboard"))},[...t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),V(" 返回 ",-1)])]),t[11]||(t[11]=e("h1",{class:"logo"},"数据库管理",-1))]),e("div",ye,[de(ke)])]),e("main",Ce,[e("div",Me,[T.value?(o(),l("div",{key:0,class:j(["message",J.value])},n(T.value),3)):v("",!0),e("div",xe,[e("div",$e,[t[13]||(t[13]=e("div",{class:"stat-icon blue"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])],-1)),e("div",Se,[e("span",Ve,n(L.value.length),1),t[12]||(t[12]=e("span",{class:"stat-label"},"数据表",-1))])]),e("div",je,[t[15]||(t[15]=e("div",{class:"stat-icon green"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})])],-1)),e("div",Te,[e("span",Le,n((($=D.value)==null?void 0:$.total_records)||0),1),t[14]||(t[14]=e("span",{class:"stat-label"},"总记录数",-1))])]),e("div",Be,[t[17]||(t[17]=e("div",{class:"stat-icon purple"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ae,[e("span",ze,n(((F=(C=D.value)==null?void 0:C.last_updated)==null?void 0:F.split(" ")[1])||"-"),1),t[16]||(t[16]=e("span",{class:"stat-label"},"最后更新",-1))])])]),e("div",qe,[e("button",{class:j(["tab-btn",{active:h.value==="tables"}]),onClick:t[1]||(t[1]=a=>h.value="tables")}," 数据表列表 ",2),e("button",{class:j(["tab-btn",{active:h.value==="records"}]),onClick:t[2]||(t[2]=a=>h.value="records"),disabled:!r.value}," 表数据 "+n(r.value?`(${r.value})`:""),11,Ee),e("button",{class:j(["tab-btn",{active:h.value==="sql"}]),onClick:t[3]||(t[3]=a=>h.value="sql")}," SQL查询 ",2)]),h.value==="tables"?(o(),l("div",Oe,[e("div",Ie,[(o(!0),l(g,null,_(L.value,a=>(o(),l("div",{key:a.name,class:"table-item",onClick:p=>X(a.name)},[t[19]||(t[19]=e("div",{class:"table-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125m-3.75 0v7.5c0 .621.504 1.125 1.125 1.125m3.75-3.75C9.496 8.25 10 7.746 10 7.125m-3.75 0v3.75c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M9 12.75h3.75M9 12.75V5.625m0 7.5h3.75M9 12.75V5.625m0 7.5H6m0 7.5v7.5c0 .621.504 1.125 1.125 1.125m3.75-7.5h-3.75m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125m-3.75 0v7.5c0 .621.504 1.125 1.125 1.125m3.75-3.75C9.496 8.25 10 7.746 10 7.125m-3.75 0v3.75c0 .621.504 1.125 1.125 1.125m0 0h1.5"})])],-1)),e("div",He,[e("span",Ne,n(a.name),1),e("span",Re,n(a.comment||"无描述"),1)]),e("div",Je,[e("span",Pe,n(a.record_count),1),t[18]||(t[18]=e("span",{class:"count-label"},"条记录",-1))]),t[20]||(t[20]=e("svg",{class:"chevron",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1))],8,De))),128))]),L.value.length===0&&!w.value?(o(),l("div",Fe,[...t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125m-3.75 0v7.5c0 .621.504 1.125 1.125 1.125m3.75-3.75C9.496 8.25 10 7.746 10 7.125m-3.75 0v3.75c0 .621.504 1.125 1.125 1.125m0 0h1.5"})],-1),e("p",null,"暂无数据表",-1)])])):v("",!0)])):v("",!0),h.value==="records"?(o(),l("div",Qe,[u.value?(o(),l("div",Ue,[e("div",Ke,[e("div",Ge,[e("h3",null,n(u.value.table_name),1),e("span",We,n(u.value.record_count)+" 条记录",1)]),e("div",Xe,[e("button",{class:"action-btn",onClick:Y},[...t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),V(" 新增 ",-1)])]),e("button",{class:"action-btn danger",onClick:t[4]||(t[4]=a=>S.value=!0),disabled:c.value.length===0},[t[23]||(t[23]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)),V(" 删除选中 ("+n(c.value.length)+") ",1)],8,Ye)])]),e("div",Ze,[e("div",et,[t[24]||(t[24]=e("h4",null,"列信息",-1)),e("div",tt,[(o(!0),l(g,null,_(u.value.columns,a=>(o(),l("span",{key:a.name,class:j(["column-tag",{primary:a.primary_key}])},[V(n(a.name)+" ",1),e("small",null,n(a.type),1)],2))),128))])])]),e("div",st,[e("table",at,[e("thead",null,[e("tr",null,[e("th",lt,[e("input",{type:"checkbox",checked:ne.value,onChange:oe},null,40,ot)]),(o(!0),l(g,null,_(u.value.columns,a=>(o(),l("th",{key:a.name},n(a.name),1))),128)),t[25]||(t[25]=e("th",{class:"action-col"},"操作",-1))])]),e("tbody",null,[(o(),l(g,null,_(M,a=>e("tr",{key:a.id},[e("td",nt,[e("input",{type:"checkbox",checked:c.value.includes(a.id),onChange:p=>le(a.id)},null,40,it)]),(o(!0),l(g,null,_(u.value.columns,p=>(o(),l("td",{key:p.name},n(P(a[p.name])),1))),128)),e("td",rt,[e("button",{class:"icon-btn edit",onClick:p=>Z(a)},[...t[26]||(t[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1)])],8,ct),e("button",{class:"icon-btn delete",onClick:p=>te(a.id)},[...t[27]||(t[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1)])],8,dt)])])),64))])]),M.length===0&&!w.value?(o(),l("div",ut," 暂无数据 ")):v("",!0)]),m.value.total_pages>1?(o(),l("div",vt,[e("button",{class:"page-btn",disabled:m.value.page===1,onClick:t[5]||(t[5]=a=>O(r.value,m.value.page-1))}," 上一页 ",8,mt),e("span",ht," 第 "+n(m.value.page)+" / "+n(m.value.total_pages)+" 页 ",1),e("button",{class:"page-btn",disabled:m.value.page===m.value.total_pages,onClick:t[6]||(t[6]=a=>O(r.value,m.value.page+1))}," 下一页 ",8,pt)])):v("",!0)])):v("",!0)])):v("",!0),h.value==="sql"?(o(),l("div",bt,[e("div",kt,[t[28]||(t[28]=e("h3",null,"SQL查询",-1)),t[29]||(t[29]=e("p",{class:"sql-hint"},"只支持 SELECT 查询，用于数据查询和分析",-1)),N(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>z.value=a),placeholder:"输入 SQL 查询语句，例如：SELECT * FROM users LIMIT 10",class:"sql-input"},null,512),[[ue,z.value]]),e("button",{class:"execute-btn",onClick:ae,disabled:q.value},n(q.value?"执行中...":"执行查询"),9,gt),b.value?(o(),l("div",_t,[e("div",ft,[e("span",null,"查询结果 ("+n(b.value.row_count)+" 行)",1)]),e("div",wt,[b.value.data.length>0?(o(),l("table",yt,[e("thead",null,[e("tr",null,[(o(!0),l(g,null,_(b.value.columns,a=>(o(),l("th",{key:a},n(a),1))),128))])]),e("tbody",null,[(o(!0),l(g,null,_(b.value.data,(a,p)=>(o(),l("tr",{key:p},[(o(!0),l(g,null,_(b.value.columns,U=>(o(),l("td",{key:U},n(P(a[U])),1))),128))]))),128))])])):(o(),l("div",Ct,"查询结果为空"))])])):v("",!0)])])):v("",!0)])]),B.value?(o(),l("div",{key:0,class:"modal-overlay",onClick:R(I,["self"])},[e("div",Mt,[e("div",xt,[e("h3",null,n(x.value==="create"?"新增记录":"编辑记录"),1),e("button",{class:"close-btn",onClick:I},"×")]),e("div",$t,[e("form",{onSubmit:R(ee,["prevent"])},[(o(!0),l(g,null,_((Q=u.value)==null?void 0:Q.columns,a=>N((o(),l("div",{key:a.name,class:"form-group"},[e("label",{for:a.name},[V(n(a.name)+" ",1),a.primary_key?(o(),l("span",Vt,"PK")):v("",!0)],8,St),N(e("input",{id:a.name,"onUpdate:modelValue":p=>y[a.name]=p,type:a.type.includes("INT")||a.type.includes("FLOAT")?"number":"text",placeholder:a.type},null,8,jt),[[be,y[a.name]]])])),[[pe,a.name!=="id"&&a.name!=="created_at"&&a.name!=="updated_at"]])),128)),e("div",Tt,[e("button",{type:"button",class:"cancel-btn",onClick:I},"取消"),e("button",Lt,n(x.value==="create"?"创建":"保存"),1)])],32)])])])):v("",!0),S.value?(o(),l("div",{key:1,class:"modal-overlay",onClick:t[9]||(t[9]=R(a=>S.value=!1,["self"]))},[e("div",Bt,[t[30]||(t[30]=e("div",{class:"modal-header"},[e("h3",null,"确认删除")],-1)),e("div",At,[e("p",null,"确定要删除选中的 "+n(c.value.length)+" 条记录吗？此操作不可恢复。",1),e("div",zt,[e("button",{class:"cancel-btn",onClick:t[8]||(t[8]=a=>S.value=!1)},"取消"),e("button",{class:"danger-btn",onClick:se},"确认删除")])])])])):v("",!0)])}}}),Ht=ge(qt,[["__scopeId","data-v-d5a70adc"]]);export{Ht as default};
