import{d as A,c as i,p as r,b as E,y as x,z as d,A as m,B as c,C as v,D as b,G as S,E as w,q as U,F as g,r as V,e as l,x as $}from"./vendor-EuZm8Jb1.js";import{u as H}from"./index-CA7K6Hnt.js";import{M as N}from"./ModeToggle-bHcRDFnx.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"register-page"},T={class:"page-header"},D={class:"page-main"},G={class:"register-card"},j={key:0,class:"error-banner"},O={class:"form-group"},Z={key:0,class:"field-error"},q={key:1,class:"field-error"},I={class:"form-group"},L={key:0,class:"field-error"},J={key:1,class:"field-error"},K={class:"form-group"},Q={key:0,class:"field-error"},W={class:"form-group"},X={key:0,class:"field-error"},Y={class:"form-group terms-group"},ss={class:"checkbox-label"},es={key:0,class:"field-error"},rs=["disabled"],as={key:0,class:"loading-spinner"},os={class:"login-prompt"},ts=A({__name:"RegisterView",setup(is){const h=$(),B=H(),o=g({username:"",email:"",password:"",confirmPassword:"",terms:!1}),a=g({}),n=g({}),u=V(""),f=V(!1),k=e=>{if(!e.trim())return"用户名不能为空";if(e.length<3)return"用户名至少3个字符";if(e.length>20)return"用户名最多20个字符";if(!/^[a-zA-Z0-9_]+$/.test(e))return"用户名只能包含字母、数字和下划线"},y=e=>{if(!e.trim())return"邮箱不能为空";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return"请输入有效的邮箱地址"},_=e=>{if(!e)return"密码不能为空";if(e.length<6)return"密码至少6个字符";if(e.length>32)return"密码最多32个字符";if(!/[a-zA-Z]/.test(e))return"密码必须包含字母";if(!/[0-9]/.test(e))return"密码必须包含数字"},P=e=>{if(!e)return"请再次输入密码";if(e!==o.password)return"两次输入的密码不一致"},C=()=>{let e=!0;return a.username=k(o.username),a.email=y(o.email),a.password=_(o.password),a.confirmPassword=P(o.confirmPassword),a.terms=o.terms?void 0:"请同意用户协议",(a.username||a.email||a.password||a.confirmPassword||a.terms)&&(e=!1),e},p=e=>{switch(e){case"username":a.username=k(o.username);break;case"email":a.email=y(o.email);break;case"password":a.password=_(o.password);break;case"confirmPassword":a.confirmPassword=P(o.confirmPassword);break}},M=async()=>{if(u.value="",Object.keys(n).forEach(e=>delete n[e]),!!C()){f.value=!0;try{const e=await B.register(o.username,o.email,o.password,o.confirmPassword);e.success?h.push("/dashboard"):(u.value=e.error||"注册失败，请稍后重试",e.details&&Object.entries(e.details).forEach(([s,t])=>{Array.isArray(t)&&t.length>0&&(n[s]=t)}))}catch{u.value="网络错误，请检查网络连接"}finally{f.value=!1}}},z=()=>{h.push("/login")};return(e,s)=>(l(),i("div",F,[r("header",T,[s[9]||(s[9]=r("h1",{class:"logo"},"CV Algorithm Hub",-1)),E(N)]),r("main",D,[r("div",G,[s[16]||(s[16]=r("div",{class:"card-header"},[r("h2",null,"创建账户"),r("p",{class:"subtitle"},"加入算法分享社区")],-1)),r("form",{onSubmit:x(M,["prevent"]),class:"register-form",novalidate:""},[u.value?(l(),i("div",j,d(u.value),1)):m("",!0),r("div",O,[s[10]||(s[10]=r("label",{for:"username"},"用户名",-1)),c(r("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=t=>o.username=t),type:"text",placeholder:"3-20个字符，仅字母数字下划线",class:b(["form-input",{error:a.username||n.username}]),onBlur:s[1]||(s[1]=t=>p("username"))},null,34),[[v,o.username]]),a.username?(l(),i("span",Z,d(a.username),1)):n.username?(l(),i("span",q,d(n.username[0]),1)):m("",!0)]),r("div",I,[s[11]||(s[11]=r("label",{for:"email"},"邮箱",-1)),c(r("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=t=>o.email=t),type:"email",placeholder:"your@email.com",class:b(["form-input",{error:a.email||n.email}]),onBlur:s[3]||(s[3]=t=>p("email"))},null,34),[[v,o.email]]),a.email?(l(),i("span",L,d(a.email),1)):n.email?(l(),i("span",J,d(n.email[0]),1)):m("",!0)]),r("div",K,[s[12]||(s[12]=r("label",{for:"password"},"密码",-1)),c(r("input",{id:"password","onUpdate:modelValue":s[4]||(s[4]=t=>o.password=t),type:"password",placeholder:"6-32位，包含字母和数字",class:b(["form-input",{error:a.password}]),onBlur:s[5]||(s[5]=t=>p("password"))},null,34),[[v,o.password]]),a.password?(l(),i("span",Q,d(a.password),1)):m("",!0)]),r("div",W,[s[13]||(s[13]=r("label",{for:"confirmPassword"},"确认密码",-1)),c(r("input",{id:"confirmPassword","onUpdate:modelValue":s[6]||(s[6]=t=>o.confirmPassword=t),type:"password",placeholder:"再次输入密码",class:b(["form-input",{error:a.confirmPassword}]),onBlur:s[7]||(s[7]=t=>p("confirmPassword"))},null,34),[[v,o.confirmPassword]]),a.confirmPassword?(l(),i("span",X,d(a.confirmPassword),1)):m("",!0)]),r("div",Y,[r("label",ss,[c(r("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>o.terms=t),type:"checkbox",class:"checkbox-input"},null,512),[[S,o.terms]]),s[14]||(s[14]=r("span",{class:"checkbox-text"},[w(" 我已阅读并同意 "),r("a",{href:"#",class:"link"},"用户协议"),w(" 和 "),r("a",{href:"#",class:"link"},"隐私政策")],-1))]),a.terms?(l(),i("span",es,d(a.terms),1)):m("",!0)]),r("button",{type:"submit",class:"submit-btn",disabled:f.value},[f.value?(l(),i("span",as)):m("",!0),w(" "+d(f.value?"注册中...":"注册"),1)],8,rs)],32),r("div",os,[s[15]||(s[15]=w(" 已有账号？ ",-1)),r("a",{href:"#",class:"link",onClick:x(z,["prevent"])},"立即登录")]),s[17]||(s[17]=U('<div class="divider" data-v-5b8ecff8><span data-v-5b8ecff8>或</span></div><div class="social-login" data-v-5b8ecff8><button class="social-btn github" data-v-5b8ecff8><svg class="social-icon" viewBox="0 0 24 24" fill="currentColor" data-v-5b8ecff8><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" data-v-5b8ecff8></path></svg> GitHub </button><button class="social-btn google" data-v-5b8ecff8><svg class="social-icon" viewBox="0 0 24 24" data-v-5b8ecff8><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-5b8ecff8></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-5b8ecff8></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-5b8ecff8></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-5b8ecff8></path></svg> Google </button></div>',2))])])]))}}),us=R(ts,[["__scopeId","data-v-5b8ecff8"]]);export{us as default};
